var util=require("util"),Handler=require("../lib/handler");
function ByteSplitHandler(){this.type="byteSplit";this.handle=function(g,b){for(var a="",d=b.size||0,e=b.seperator||"",c=0;c<d;c++)a+=this.buf.readUInt8(c),c+1<d&&(a+=e);this.buf=this.buf.slice(d);this.obj[g]=a};this.unhandle=function(g,b){var a=this.desc[g],d=b.size||0,e=b.seperator||"",c=new Buffer(d);if((a=a.split(e))&&a.length===d)for(var f=0;f<d;f++)if(e=a[f],isNaN(1*e)||255<e){if(!b.ignore)throw Error("Unhandle Error - Unknown Value (Name:"+b.name+", Value:"+a+")");c.writeUInt8(0,f)}else c.writeUInt8(e,
f);else{if(!b.ignore)throw Error("Unhandler Error - Unknown Value(Name:"+b.name+", Value:"+a+")");for(a=0;a<d;a++)c.writeUInt8(0,a+1)}this.bufArray.push(c)}}util.inherits(ByteSplitHandler,Handler);module.exports=new ByteSplitHandler;