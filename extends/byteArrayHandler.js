var util=require("util"),Handler=require("../lib/handler");
function ByteArrayHandler(){var g=this;this.type="byteArray";this.handle=function(f,b){for(var a=this.buf[0],e=[],c=0;c<a;c++){var d=g.changeEnumValue(this.buf.readUInt8(c+1),b["enum"]);if(void 0==d&&!b.ignore)throw Error("Handler Error - Unknown Value(Name:"+b.name+", Value:"+d+")");void 0!=d&&b.isString&&(d+="");e.push(d)}this.buf=this.buf.slice(c+1);this.obj[f]=e};this.unhandle=function(f,b){var a=this.desc[f],e=0,c,d;if(a&&Array.isArray(a)){if(255<a.length)throw Error("Unhandler Error - Out of index(Name:"+
b.name+", Value:"+a.length+")");c=new Buffer(a.length+1);for(c.writeUInt8(a.length);e<a.length;e++)if(d=g.changeByteValue(a[e],b["enum"]),isNaN(1*d)||255<d){if(!b.ignore)throw Error("Unhandle Error - Unknown Value (Name:"+b.name+", Value:"+JSON.stringify(a)+")");c.writeUInt8(0,e+1)}else c.writeUInt8(d,e+1)}else{if(!b.ignore)throw Error("Unhandler Error - Unknown Value(Name:"+b.name+", Value:"+JSON.stringify(a)+")");c=new Buffer([0])}this.bufArray.push(c)}}util.inherits(ByteArrayHandler,Handler);
module.exports=new ByteArrayHandler;